<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>GST í†µí•© ëŒ€ì‹œë³´ë“œ</title>
  <meta http-equiv="refresh" content="3600">
  <style>
    body { font-family: 'NanumGothic', sans-serif; margin: 0; }
    .tab { display: flex; background: #333; color: white; }
    .tab button {
      flex: 1; padding: 14px 16px; background: #333; border: none;
      color: white; cursor: pointer; transition: 0.3s; font-size: 16px;
    }
    .tab button:hover { background-color: #575757; }
    .tab button.active { background-color: #007acc; }
    iframe { width: 100%; height: 95vh; border: none; }
  </style>

  <!-- âœ… Google Analytics ì‚½ì… ì‹œì‘ -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-F7HTZVLPLF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-F7HTZVLPLF');
  </script>
  <!-- âœ… Google Analytics ì‚½ì… ë -->
</head>

<body>

<div class="tab">
  <button class="tablinks active" onclick="openFactoryTab('factory.html#mech-summary', this)">ğŸ­ ê³µì¥ ëŒ€ì‹œë³´ë“œ</button>
  <button class="tablinks" onclick="openTab('partner.html', this)">ğŸ¤ í˜‘ë ¥ì‚¬ ëŒ€ì‹œë³´ë“œ</button>
  <button class="tablinks" onclick="openProtectedTab('internal.html', this)">ğŸ”’ ë‚´ë¶€ ëŒ€ì‹œë³´ë“œ</button>
</div>

<iframe id="dashboardFrame" src="factory.html#mech-summary"></iframe>

<script>
  // ê³µì¥ ëŒ€ì‹œë³´ë“œ ë¹„ë°€ë²ˆí˜¸ (ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ë¡œ ìœ ì§€)
  function openFactoryTab(page, btn) {
    const factoryAuth = sessionStorage.getItem("factory_auth");
    if (!factoryAuth) {
      const password = prompt("ğŸ” ê³µì¥ ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ì„ ìœ„í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:");
      if (password === "2501") {
        sessionStorage.setItem("factory_auth", "ok");
      } else {
        alert("âŒ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤. ì ‘ê·¼ì´ ì œí•œë©ë‹ˆë‹¤.");
        return; // ì¸ì¦ ì‹¤íŒ¨ ì‹œ íƒ­ ì´ë™ ì¤‘ë‹¨
      }
    }
    document.getElementById("dashboardFrame").src = page;
    const tabs = document.getElementsByClassName("tablinks");
    for (let i = 0; i < tabs.length; i++) {
      tabs[i].classList.remove("active");
    }
    btn.classList.add("active");
  }

  // ë‚´ë¶€ ëŒ€ì‹œë³´ë“œ ë¹„ë°€ë²ˆí˜¸
  function openProtectedTab(page, btn) {
    const internalAuth = sessionStorage.getItem("internal_auth");
    if (!internalAuth) {
      const password = prompt("ğŸ” ë‚´ë¶€ ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ì„ ìœ„í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:");
      if (password === "0979") {
        sessionStorage.setItem("internal_auth", "ok");
      } else {
        alert("âŒ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤. ì ‘ê·¼ì´ ì œí•œë©ë‹ˆë‹¤.");
        return;
      }
    }
    document.getElementById("dashboardFrame").src = page;
    const tabs = document.getElementsByClassName("tablinks");
    for (let i = 0; i < tabs.length; i++) {
      tabs[i].classList.remove("active");
    }
    btn.classList.add("active");
  }

  // ê¸°ì¡´ openTab í•¨ìˆ˜ëŠ” ì¼ë°˜íƒ­(í˜‘ë ¥ì‚¬)ë§Œ ë‹´ë‹¹
  function openTab(page, btn) {
    document.getElementById("dashboardFrame").src = page;
    const tabs = document.getElementsByClassName("tablinks");
    for (let i = 0; i < tabs.length; i++) {
      tabs[i].classList.remove("active");
    }
    btn.classList.add("active");
  }
</script>

</body>
</html>
